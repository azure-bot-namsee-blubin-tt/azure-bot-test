version: '3.8'

services:
  azure-bot:
    image: ghcr.io/azure-bot-namsee-blubin-tt/azure-bot-test:${TAG:-latest}
    # Build locally to use latest code:
    build: .
    container_name: azure-bot
    restart: unless-stopped
    ports:
      - "3978:3978"
    env_file:
      - .env
    # environment:
    #   - OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4318
    # depends_on:
    #   - jaeger
    healthcheck:
      test: ["CMD", "wget", "--spider", "-q", "http://localhost:3978"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s

  # # Jaeger - All-in-one for traces, metrics visualization
  # # UI available at http://localhost:16686
  # jaeger:
  #   image: jaegertracing/jaeger:2.1.0
  #   container_name: jaeger
  #   restart: unless-stopped
  #   ports:
  #     - "16686:16686"  # Jaeger UI
  #     - "4317:4317"    # OTLP gRPC
  #     - "4318:4318"    # OTLP HTTP
  #   environment:
  #     - COLLECTOR_OTLP_ENABLED=true
